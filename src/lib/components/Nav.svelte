<script lang="ts">
  import { userAddress } from '$lib/stores'
  import WalletConnectionModal from './WalletConnectionModal.svelte'
  import NavWalletDisplay from './NavWalletDisplay.svelte'
  import NavPageLink from './NavPageLink.svelte'
</script>

<div class="top-nav-wrapper">
  <div class="top-nav-content">
    <a href="/">
      <img src="/pooltogether.svg" alt="PoolTogether" class="desktop-only" />
      <img src="/pooltogether-small.svg" alt="PoolTogether" class="mobile-only" />
    </a>
    <WalletConnectionModal>
      <NavWalletDisplay slot="button-content" />
    </WalletConnectionModal>
  </div>
</div>

{#if !!$userAddress}
  <nav>
    <NavPageLink href="/deposit" name="Deposit" viewBox="0 0 25 25">
      <path
        fill-rule="evenodd"
        d="M12.5 24.5C15.6826 24.5 18.7348 23.2357 20.9853 20.9853C23.2357 18.7348 24.5 15.6826 24.5 12.5C24.5 9.3174 23.2357 6.26516 20.9853 4.01472C18.7348 1.76428 15.6826 0.5 12.5 0.5C9.3174 0.5 6.26516 1.76428 4.01472 4.01472C1.76428 6.26516 0.5 9.3174 0.5 12.5C0.5 15.6826 1.76428 18.7348 4.01472 20.9853C6.26516 23.2357 9.3174 24.5 12.5 24.5ZM14 8C14 7.60218 13.842 7.22064 13.5607 6.93934C13.2794 6.65804 12.8978 6.5 12.5 6.5C12.1022 6.5 11.7206 6.65804 11.4393 6.93934C11.158 7.22064 11 7.60218 11 8V13.379L9.0605 11.4395C8.7776 11.1663 8.39869 11.0151 8.0054 11.0185C7.6121 11.0219 7.23588 11.1797 6.95777 11.4578C6.67966 11.7359 6.52191 12.1121 6.51849 12.5054C6.51507 12.8987 6.66626 13.2776 6.9395 13.5605L11.4395 18.0605C11.7208 18.3417 12.1023 18.4997 12.5 18.4997C12.8977 18.4997 13.2792 18.3417 13.5605 18.0605L18.0605 13.5605C18.3337 13.2776 18.4849 12.8987 18.4815 12.5054C18.4781 12.1121 18.3203 11.7359 18.0422 11.4578C17.7641 11.1797 17.3879 11.0219 16.9946 11.0185C16.6013 11.0151 16.2224 11.1663 15.9395 11.4395L14 13.379V8Z"
      />
    </NavPageLink>
    <NavPageLink href="/withdraw" name="Withdraw" viewBox="0 0 24 25">
      <path
        fill-rule="evenodd"
        d="M12 24.5C15.1826 24.5 18.2348 23.2357 20.4853 20.9853C22.7357 18.7348 24 15.6826 24 12.5C24 9.3174 22.7357 6.26516 20.4853 4.01472C18.2348 1.76428 15.1826 0.5 12 0.5C8.8174 0.5 5.76516 1.76428 3.51472 4.01472C1.26428 6.26516 0 9.3174 0 12.5C0 15.6826 1.26428 18.7348 3.51472 20.9853C5.76516 23.2357 8.8174 24.5 12 24.5ZM17.5605 11.4395L13.0605 6.9395C12.7792 6.65829 12.3977 6.50032 12 6.50032C11.6023 6.50032 11.2208 6.65829 10.9395 6.9395L6.4395 11.4395C6.16626 11.7224 6.01507 12.1013 6.01849 12.4946C6.02191 12.8879 6.17966 13.2641 6.45777 13.5422C6.73588 13.8203 7.1121 13.9781 7.5054 13.9815C7.89869 13.9849 8.2776 13.8337 8.5605 13.5605L10.5 11.621V17C10.5 17.3978 10.658 17.7794 10.9393 18.0607C11.2206 18.342 11.6022 18.5 12 18.5C12.3978 18.5 12.7794 18.342 13.0607 18.0607C13.342 17.7794 13.5 17.3978 13.5 17V11.621L15.4395 13.5605C15.7224 13.8337 16.1013 13.9849 16.4946 13.9815C16.8879 13.9781 17.2641 13.8203 17.5422 13.5422C17.8203 13.2641 17.9781 12.8879 17.9815 12.4946C17.9849 12.1013 17.8337 11.7224 17.5605 11.4395Z"
      />
    </NavPageLink>
    <NavPageLink href="/prizes" name="Prizes" viewBox="0 0 24 25">
      <path
        fill-rule="evenodd"
        d="M12 24.5C18.6274 24.5 24 19.1274 24 12.5C24 5.87258 18.6274 0.5 12 0.5C5.37258 0.5 0 5.87258 0 12.5C0 19.1274 5.37258 24.5 12 24.5ZM16.9684 7.52898H19.3095L19.3095 7.52892C19.6968 7.52892 20 7.83473 20 8.18879V10.5869C20 12.148 18.7874 13.4356 17.1705 13.5804L15.2168 13.7575L15.2006 13.7743C15.0048 13.977 14.8236 14.1646 14.6105 14.3369L13.2968 15.4313V16.4774H13.7515C14.1053 16.4774 14.3916 16.7511 14.3916 17.0891V17.411H14.8632C15.2 17.411 15.4695 17.6685 15.4695 17.9903V20.4206C15.4695 20.7425 15.2 21 14.8632 21H9.13684C8.8 21 8.53053 20.7425 8.53053 20.4206V17.9743C8.53053 17.6524 8.8 17.3949 9.13684 17.3949L9.60845 17.3949V17.073C9.60845 16.735 9.8948 16.4614 10.2485 16.4614H10.7032V15.4153L9.38947 14.3208C9.17056 14.1438 8.96842 13.9345 8.78317 13.7414L6.82948 13.5644C5.21261 13.4035 4 12.1159 4 10.5708V8.18884C4 7.8187 4.30312 7.52898 4.69051 7.52898H7.01473V6.65986C7.01473 6.28973 7.31784 6 7.70524 6H16.2779C16.6652 6 16.9684 6.28966 16.9684 6.65986V7.52898ZM5.36417 10.5708C5.36417 11.456 6.05468 12.1803 6.96417 12.2608L7.7726 12.3412C7.28416 11.4238 7.0147 10.4099 7.0147 9.36372V8.84873H5.36417V10.5708ZM14.2568 19.8413V18.5698H9.74313V19.8413H14.2568ZM12.5221 13.677L12.5221 13.1621C13.1958 13.0172 13.701 12.5022 13.8022 11.8745C13.8527 11.44 13.718 11.0376 13.4148 10.7318C13.1117 10.426 12.7074 10.249 12.2695 10.249H11.8148C11.6632 10.249 11.5285 10.1846 11.4274 10.088C11.3263 9.97533 11.2758 9.84661 11.2927 9.70175C11.3095 9.46033 11.5453 9.26722 11.8316 9.26722H12.3705C12.5221 9.26722 12.6569 9.36378 12.6905 9.50864C12.7074 9.6052 12.7916 9.66959 12.8926 9.66959H13.4989C13.5495 9.66959 13.6168 9.6535 13.6505 9.6052C13.6842 9.57297 13.7011 9.50864 13.7011 9.46033C13.6337 8.84878 13.1452 8.38203 12.5221 8.30156V7.80264C12.5221 7.68994 12.421 7.59338 12.3031 7.59338H11.6968C11.5789 7.59338 11.4779 7.69 11.4779 7.80264V8.31764C10.7031 8.46249 10.1473 9.13843 10.2315 9.91099C10.2989 10.6513 11.0062 11.2307 11.8315 11.2307H12.202C12.3536 11.2307 12.4883 11.2951 12.5894 11.3917C12.6905 11.5044 12.741 11.6331 12.7241 11.7779C12.7073 12.0194 12.4715 12.2125 12.1852 12.2125H11.6463C11.4947 12.2125 11.3599 12.1159 11.3263 11.971C11.3095 11.8745 11.2252 11.8101 11.1242 11.8101H10.5179C10.4505 11.8101 10.3831 11.8262 10.3495 11.8745C10.3158 11.9067 10.2989 11.971 10.2989 12.0194C10.3663 12.6309 10.8547 13.0977 11.4779 13.1781L11.4778 13.677C11.4778 13.7897 11.5789 13.8863 11.6968 13.8863H12.3031C12.421 13.8863 12.5221 13.7897 12.5221 13.677ZM17.0189 12.2608C17.9284 12.1642 18.6189 11.44 18.6189 10.5708L18.6189 8.84875H16.9684V9.36375C16.9684 10.4099 16.6989 11.4239 16.2105 12.3412L17.0189 12.2608Z"
      />
    </NavPageLink>
    <NavPageLink href="/account" name="Account" viewBox="0 0 25 25">
      <path
        fill-rule="evenodd"
        d="M24.5 12.5C24.5 15.6826 23.2357 18.7348 20.9853 20.9853C18.7348 23.2357 15.6826 24.5 12.5 24.5C9.3174 24.5 6.26516 23.2357 4.01472 20.9853C1.76428 18.7348 0.5 15.6826 0.5 12.5C0.5 9.3174 1.76428 6.26516 4.01472 4.01472C6.26516 1.76428 9.3174 0.5 12.5 0.5C15.6826 0.5 18.7348 1.76428 20.9853 4.01472C23.2357 6.26516 24.5 9.3174 24.5 12.5ZM15.5 8C15.5 8.79565 15.1839 9.55871 14.6213 10.1213C14.0587 10.6839 13.2956 11 12.5 11C11.7044 11 10.9413 10.6839 10.3787 10.1213C9.81607 9.55871 9.5 8.79565 9.5 8C9.5 7.20435 9.81607 6.44129 10.3787 5.87868C10.9413 5.31607 11.7044 5 12.5 5C13.2956 5 14.0587 5.31607 14.6213 5.87868C15.1839 6.44129 15.5 7.20435 15.5 8ZM12.5 14C11.0639 13.9997 9.65791 14.4117 8.44912 15.1871C7.24033 15.9625 6.27957 17.0686 5.681 18.374C6.52502 19.3559 7.57141 20.1436 8.74842 20.6832C9.92543 21.2228 11.2052 21.5014 12.5 21.5C13.7948 21.5014 15.0746 21.2228 16.2516 20.6832C17.4286 20.1436 18.475 19.3559 19.319 18.374C18.7204 17.0686 17.7597 15.9625 16.5509 15.1871C15.3421 14.4117 13.9361 13.9997 12.5 14Z"
      />
    </NavPageLink>
  </nav>
{/if}

<style>
  div.top-nav-wrapper {
    display: flex;
    justify-content: center;
    padding: 1rem;
    overflow-x: hidden;
  }

  div.top-nav-content {
    width: 100%;
    max-width: 1280px;
    display: flex;
    align-items: center;
    justify-content: space-between;
  }

  nav {
    position: fixed;
    bottom: 0;
    width: 100%;
    display: flex;
    justify-content: space-evenly;
    align-items: center;
    padding: 1rem 0;
    background-color: var(--pt-purple-600);
    border-top: 2px solid var(--pt-purple-500);
    z-index: 1;
  }

  @media (min-width: 48rem) {
    nav {
      position: absolute;
      inset: 0 auto auto 50%;
      height: 3.25rem;
      translate: -50%;
      max-width: 48rem;
      justify-content: center;
      gap: 2.5rem;
      background-color: transparent;
      border: none;
    }
  }
</style>
